Test-driven roadmap:
=================

Step 1: (✓)
Heal someone outside of battle
-----------------

Step 2: (✓)

  Step 2.1: (✓)
  Attack someone and trigger battle

  Step 2.2: (✓)
  Launch an area attack with 3 targets and trigger battle
-----------------

Step 3: (✓)

  Step 3.1: (✓)
  Attack someone who is already in battle and join that battle

  Step 3.2: (✓)
  Launch an area attack
  where some of targets are already in battle
  and join that battle
-----------------

Step 4: (✓)
End battle when all members of one team have zero hp
-----------------

Step 5: (✓)
Game loop updates all characters each turn
regardless of their inclusion in battles
-----------------

Step 6: (✓)
Battle with 3 teams
-----------------

Step 7: (✗)

  Step 7.1: (✓)
  Add a DOT effect and see targets take damage periodically

  Step 7.2: (✓)
  Add a Tank Protection effect
  and let target transfer damage to tank (source)

  Step 7.3: (✗)
  Add a warding effect that cancels the next incoming attack action
  (NB: code in action runner to check if target will 'accept' action)

  Step 7.4: (✗)
  Add a battle observing effect that triggers another, shielding effect
  on same character when a battle is won.
  Observe that all attacks against subject fails for 5 seconds
  after the battle was won.

  Step 7.5: (✗)
  Add a temporary strength reducing effect

  Step 7.6: (✗)
  Dispel effect
-----------------

Step 8: (✗)
Parties; whenever a character joins a battle, their whole party joins.
Can characters be part of multiple battles?
If no, what happens when only part of party is eligible to join?
-----------------

Step n-1: (✗)
Make battle resolution rules pluggable
-----------------

Step n: (✗)
Make action lookup pluggable
=================

Simplest idea:
-----------------
Friendly actions cannot initiate battles,
but are allowed in existing battles

Hostile actions initiate battle if none exist
and battle with all targets is possible

Battle with all targets is only possible if none are in battle
or they're all part of the same battle
-----------------

Problem: How can you heal someone outside of battle?
Conclusion: actions are not necessarily run within a battle context
